<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Luke Young</title>
    <link rel="canonical" href="https://yunguid.com/">
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#111827" media="(prefers-color-scheme: dark)">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Luke Young">
    <meta property="og:url" content="https://yunguid.com/">
    <meta property="og:image" content="https://yunguid.com/assets/img/headshot2.jpeg">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            background-color: transparent;
            color: #FFFFF0; /* Ivory */
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            -webkit-text-size-adjust: 100%;
        }
        
        /* iOS safe area support */
        @supports (padding: env(safe-area-inset-bottom)) {
            .content-container {
                padding-bottom: calc(4rem + env(safe-area-inset-bottom));
            }
        }

        canvas {
            display: block;
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* Typography & Layout */
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 400;
        }

        .ivory-text {
            color: #FFFFF0;
        }

        .link {
            color: #a5b4fc; /* Light indigo */
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .link:hover {
            color: #c7d2fe;
            border-bottom-color: #c7d2fe;
        }

        /* Scroll Layout */
        .spacer {
            height: 100vh;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding-bottom: 2rem;
            pointer-events: none;
        }

        .scroll-arrow {
            opacity: 0.6;
            animation: bounce 2s infinite;
            color: #FFFFF0;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .content-container {
            min-height: 100vh;
            padding: 2rem;
            display: flex;
            justify-content: center;
            padding-bottom: 8rem;
            position: relative;
            z-index: 1;
            pointer-events: none;
        }

        .black-card {
            background: transparent;
            backdrop-filter: none;
            border: none;
            border-radius: 0;
            padding: 0;
            max-width: 900px;
            width: 100%;
            box-shadow: none;
            opacity: 1;
            transform: none;
            pointer-events: auto;
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            margin-bottom: 4rem;
        }

        .section-title {
            font-size: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 240, 0.3);
            padding-bottom: 0.5rem;
            margin-bottom: 2rem;
            letter-spacing: 0.05em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* Resume Items */
        .resume-item {
            margin-bottom: 2rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }
        .resume-role {
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        .resume-date {
            font-size: 0.85rem;
            opacity: 0.6;
            margin-bottom: 0.75rem;
            font-family: 'IBM Plex Mono', monospace;
        }
        .resume-desc {
            font-size: 0.95rem;
            line-height: 1.6;
            opacity: 0.9;
        }

        /* Book Grid */
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        .book-card {
            background: rgba(0, 0, 0, 0.4);
            padding: 1.25rem;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease;
            backdrop-filter: blur(4px);
        }
        .book-card:hover {
            transform: translateY(-2px);
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(255, 255, 255, 0.2);
        }
        .book-title {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }
        .book-author {
            font-size: 0.85rem;
            opacity: 0.6;
        }
        .book-status {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.75rem;
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
        }
        .status-read { color: #a5b4fc; background: rgba(165, 180, 252, 0.1); }
        .status-toread { color: #9ca3af; }

        /* Music Grid */
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }
        .music-item {
            display: block;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 6px;
            text-decoration: none;
            color: inherit;
            transition: background 0.2s ease, transform 0.15s ease;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .music-item:hover {
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(255, 255, 255, 0.2);
        }
        .music-item:active {
            transform: scale(0.98);
            background: rgba(0, 0, 0, 0.7);
        }

        /* Pagination */
        .pagination-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            margin-top: 2rem;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.85rem;
            opacity: 0.8;
        }
        .nav-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #FFFFF0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s;
            touch-action: manipulation;
        }
        .nav-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
        }
        .nav-btn:active:not(:disabled) {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(0.95);
        }
        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            border-color: rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .content-container {
                padding: 1rem;
                padding-bottom: 4rem;
            }
            .black-card {
                padding: 0;
            }
            .spacer {
                height: 50vh;
            }
            .section {
                margin-bottom: 2.5rem;
            }
            .section-title {
                font-size: 1.25rem;
                margin-bottom: 1.5rem;
            }
            .book-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .music-grid {
                grid-template-columns: 1fr;
            }
            .production-grid {
                grid-template-columns: 1fr;
            }
            .resume-item {
                margin-bottom: 1.5rem;
            }
            .resume-role {
                font-size: 1rem;
                line-height: 1.4;
            }
            .resume-desc {
                font-size: 0.9rem;
            }
            .nav-btn {
                width: 44px;
                height: 44px;
            }
            .pagination-controls {
                gap: 1rem;
            }
            .volume-container {
                display: none;
            }
            .audio-controls {
                padding: 0.75rem 1rem 1rem;
            }
            .player-button {
                width: 36px;
                height: 36px;
            }
            .track-info {
                padding: 0.75rem 1rem 0.5rem;
            }
            .waveform-container {
                padding: 0 1rem;
            }
        }
        
        @media (max-width: 480px) {
            .content-container {
                padding: 0.75rem;
            }
            .book-card {
                padding: 1rem;
            }
            .music-item {
                padding: 0.875rem;
            }
            .resume-role {
                font-size: 0.95rem;
            }
            .resume-date {
                font-size: 0.8rem;
            }
            .resume-desc {
                font-size: 0.85rem;
            }
        }

        /* Audio Player Styles */
        .production-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .custom-audio-player {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            margin: 0;
            padding: 0;
            transition: background 0.2s ease, border-color 0.2s ease;
        }

        .custom-audio-player:hover {
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .audio-container {
            padding: 0;
            background: transparent;
        }

        .track-info {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            padding: 1rem 1.25rem 0.5rem;
            background: transparent;
        }

        .track-title {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            color: #FFFFF0;
            letter-spacing: 0.02em;
        }

        .track-duration {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
            color: #FFFFF0;
            opacity: 0.6;
        }

        .waveform-container {
            height: 32px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 1px;
            padding: 0 1.25rem;
            background: transparent;
            margin: 0.5rem 0;
            opacity: 0.8;
        }

        .waveform-bar {
            width: 2px;
            min-height: 2px;
            background: #FFFFF0;
            opacity: 0.2;
            border-radius: 1px;
            transition: all 0.2s ease;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            padding: 0.5rem 1.25rem 1rem;
            gap: 1rem;
            background: transparent;
        }

        .player-button {
            background: transparent;
            border: none;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
            transition: all 0.2s ease;
            opacity: 0.8;
            cursor: pointer;
            color: #FFFFF0;
            padding: 0;
            touch-action: manipulation;
        }

        .player-button:hover {
            opacity: 1;
            background: transparent;
            border-color: transparent;
        }
        
        .player-button:active {
            opacity: 1;
            transform: scale(0.9);
        }

        .progress-container {
            flex: 1;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
            cursor: pointer;
            position: relative;
            border-radius: 1px;
            transition: height 0.2s ease;
        }

        .progress-container:hover {
            height: 4px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: #a5b4fc;
            transition: width 0.1s linear;
            position: relative;
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            opacity: 0.6;
            transition: opacity 0.2s ease;
        }

        .volume-container:hover {
            opacity: 1;
        }

        .volume-slider {
            width: 50px;
            height: 2px;
            appearance: none;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            cursor: pointer;
            border-radius: 1px;
        }

        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 8px;
            height: 8px;
            background: #FFFFF0;
            cursor: pointer;
            border-radius: 50%;
            transition: transform 0.2s ease;
        }

        .volume-slider::-webkit-slider-thumb:hover {
            transform: scale(1.5);
        }

        /* Animation for waveform */
        @keyframes sound {
            0% { height: 10%; opacity: 0.3; }
            50% { height: 90%; opacity: 0.8; }
            100% { height: 10%; opacity: 0.3; }
        }
    </style>
</head>
<body>
    <canvas id="glcanvas"></canvas>

    <div class="spacer">
        <div class="scroll-arrow">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 13l5 5 5-5M7 6l5 5 5-5"/>
            </svg>
        </div>
    </div>

    <div class="content-container">
        <div class="black-card">
            <!-- Header -->
            <div class="mb-8 md:mb-12 text-center px-2">
                <h1 class="text-3xl sm:text-4xl md:text-5xl mb-4">Luke Young</h1>
                <div class="mt-4 md:mt-6 flex flex-row justify-center gap-6 text-sm uppercase tracking-widest opacity-60">
                    <a href="mailto:luke@yng.sh" class="hover:text-white transition-colors py-2">Email</a>
                    <a href="https://github.com/yunguid" target="_blank" class="hover:text-white transition-colors py-2">GitHub</a>
                </div>
            </div>

            <!-- Work Section -->
            <div class="section">
                <h2 class="section-title">Work</h2>
                
                <div class="resume-item">
                    <h3 class="resume-role">AI Software Engineer - <a href="https://www.catalystops.com/" target="_blank" class="link">Catalyst Operations & Analytics</a></h3>
                    <div class="resume-date">Jan 2025 - Present</div>
                    <p class="resume-desc">Built large-scale AI products addressing critical needs for government and defense-related clients. Projects include air-gapped bulk processing systems for multi-language audio and documents, real-time live transcription and translation engines, and advanced media processing tools.</p>
                </div>

                <div class="resume-item">
                    <h3 class="resume-role">Software Engineer Intern - <a href="https://quikirr.com/" target="_blank" class="link">Quikirr</a></h3>
                    <div class="resume-date">May 2024 - Sep 2024</div>
                    <p class="resume-desc">Joined as the first engineer to build due diligence tools for Private Equity and Investment Banking.</p>
                </div>

                <div class="resume-item">
                    <h3 class="resume-role">Lead Developer (Contract) - <a href="https://allumare.io" target="_blank" class="link">m_vis</a></h3>
                    <div class="resume-date">May 2024 - Sep 2024</div>
                    <p class="resume-desc">Solely architected and built an AI assisted audio visualization platform. Delivered a full-stack solution that automates video generation from audio inputs.</p>
                </div>

                <div class="resume-item">
                    <h3 class="resume-role">Software Engineer Intern - Jackpine Technologies</h3>
                    <div class="resume-date">June 2023 - Aug 2023</div>
                    <p class="resume-desc">Automated QA testing and migrated cloud assets, improving test coverage and accuracy for Windows/Linux environments.</p>
                </div>
            </div>

            <!-- Music Section -->
            <div class="section">
                <h2 class="section-title">Music</h2>
                <p class="mb-6 opacity-80 font-light">Some recordings of me playing the piano.</p>
                <div class="music-grid" id="piano-grid">
                    <!-- Populated by JS -->
                </div>
                <div class="pagination-controls">
                    <button id="piano-prev-btn" class="nav-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                    </button>
                    <span id="piano-page-info"></span>
                    <button id="piano-next-btn" class="nav-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                </div>

                <div class="mt-12">
                    <h3 class="text-xl mb-6 font-light opacity-80">Productions</h3>
                    <div id="production-list" class="production-grid">
                        <!-- Music metadata will be added here dynamically -->
                    </div>
                    <div class="pagination-controls">
                        <button id="prod-prev-btn" class="nav-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                        </button>
                        <span id="prod-page-info"></span>
                        <button id="prod-next-btn" class="nav-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Books Section -->
            <div class="section">
                <h2 class="section-title">Books</h2>
                <div id="books-grid" class="book-grid">
                    <!-- Populated by JS -->
                </div>
                <div class="pagination-controls">
                    <button id="prev-btn" class="nav-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
                    </button>
                    <span id="page-info"></span>
                    <button id="next-btn" class="nav-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18l6-6-6-6"/></svg>
                    </button>
                </div>
            </div>

            <div class="text-center text-sm opacity-40 mt-12 font-mono">
                &copy; 2025 Luke Young
            </div>
        </div>
    </div>

    <!-- SHADERS -->
    
    <!-- Vertex Shader -->
    <script type="x-shader/x-vertex" id="vertex-shader">#version 300 es
        layout(location = 0) in vec2 aPosition;
        out vec2 vUv;
        void main() {
            vUv = aPosition * 0.5 + 0.5;
            gl_Position = vec4(aPosition, 0.0, 1.0);
        }
    </script>

    <!-- Advection Shader -->
    <script type="x-shader/x-fragment" id="advection-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uVelocity;
        uniform sampler2D uSource;
        uniform vec2 uTexelSize;
        uniform float dt;
        uniform float uDissipation;
        out vec4 FragColor;
        void main() {
            vec2 coord = vUv - dt * texture(uVelocity, vUv).xy * uTexelSize;
            FragColor = texture(uSource, coord) * uDissipation;
        }
    </script>

    <!-- Divergence Shader -->
    <script type="x-shader/x-fragment" id="divergence-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uVelocity;
        uniform vec2 uTexelSize;
        out vec4 FragColor;
        void main() {
            float L = texture(uVelocity, vUv - vec2(uTexelSize.x, 0.0)).x;
            float R = texture(uVelocity, vUv + vec2(uTexelSize.x, 0.0)).x;
            float T = texture(uVelocity, vUv + vec2(0.0, uTexelSize.y)).y;
            float B = texture(uVelocity, vUv - vec2(0.0, uTexelSize.y)).y;
            
            float div = 0.5 * (R - L + T - B);
            FragColor = vec4(div, 0.0, 0.0, 1.0);
        }
    </script>

    <!-- Pressure / Jacobi Shader -->
    <script type="x-shader/x-fragment" id="jacobi-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uPressure;
        uniform sampler2D uDivergence;
        uniform vec2 uTexelSize;
        out vec4 FragColor;
        void main() {
            float L = texture(uPressure, vUv - vec2(uTexelSize.x, 0.0)).x;
            float R = texture(uPressure, vUv + vec2(uTexelSize.x, 0.0)).x;
            float T = texture(uPressure, vUv + vec2(0.0, uTexelSize.y)).x;
            float B = texture(uPressure, vUv - vec2(0.0, uTexelSize.y)).x;
            float C = texture(uDivergence, vUv).x;
            
            float p = (L + R + T + B - C) * 0.25;
            FragColor = vec4(p, 0.0, 0.0, 1.0);
        }
    </script>

    <!-- Gradient Subtract Shader -->
    <script type="x-shader/x-fragment" id="gradient-subtract-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uPressure;
        uniform sampler2D uVelocity;
        uniform vec2 uTexelSize;
        out vec4 FragColor;
        void main() {
            float L = texture(uPressure, vUv - vec2(uTexelSize.x, 0.0)).x;
            float R = texture(uPressure, vUv + vec2(uTexelSize.x, 0.0)).x;
            float T = texture(uPressure, vUv + vec2(0.0, uTexelSize.y)).x;
            float B = texture(uPressure, vUv - vec2(0.0, uTexelSize.y)).x;
            vec2 velocity = texture(uVelocity, vUv).xy;
            velocity.xy -= vec2(R - L, T - B) * 0.5;
            FragColor = vec4(velocity, 0.0, 1.0);
        }
    </script>

    <!-- Splat (Injection) Shader -->
    <script type="x-shader/x-fragment" id="splat-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uTarget;
        uniform float uAspectRatio;
        uniform vec2 uPoint;
        uniform vec3 uColor;
        uniform float uRadius;
        out vec4 FragColor;
        void main() {
            vec2 p = vUv - uPoint.xy;
            p.x *= uAspectRatio;
            vec3 splat = exp(-dot(p, p) / uRadius) * uColor;
            vec3 base = texture(uTarget, vUv).xyz;
            FragColor = vec4(base + splat, 1.0);
        }
    </script>

    <!-- Display Shader -->
    <script type="x-shader/x-fragment" id="display-shader">#version 300 es
        precision highp float;
        in vec2 vUv;
        uniform sampler2D uTexture;
        out vec4 FragColor;
        vec3 palette(float t) {
            // Deep space blue palette
            vec3 a = vec3(0.0, 0.0, 0.05);
            vec3 b = vec3(0.2, 0.5, 1.0);
            // Non-linear mapping for "glowing" effect
            return mix(a, b, smoothstep(0.0, 1.0, t * 1.5)); 
        }
        void main() {
            float density = texture(uTexture, vUv).x;
            vec3 color = palette(density);
            FragColor = vec4(color, 1.0);
        }
    </script>

    <!-- SIMULATION LOGIC -->
    <script>
        const CONFIG = {
            TEXTURE_DOWNSAMPLE: 2, 
            DENSITY_DISSIPATION: 0.99,
            VELOCITY_DISSIPATION: 0.99,
            PRESSURE_ITERATIONS: 20,
            CURL: 30,
            SPLAT_RADIUS: 0.0008,
            SPLAT_FORCE: 9000.0
        };

        const canvas = document.getElementById('glcanvas');
        const gl = canvas.getContext('webgl2');

        if (!gl) {
            console.error("WebGL 2.0 not available");
            document.body.innerHTML = '<div style="color:white; text-align:center; padding-top:20px;">WebGL 2.0 is required</div>';
            throw new Error("WebGL 2.0 not supported");
        }

        const extColor = gl.getExtension('EXT_color_buffer_float');
        const extLinear = gl.getExtension('OES_texture_float_linear');

        class Program {
            constructor(vertexSource, fragmentSource) {
                this.program = this.createProgram(vertexSource.trim(), fragmentSource.trim());
                if (this.program) {
                    this.uniforms = this.getUniforms(this.program);
                }
            }
            createProgram(vSource, fSource) {
                const vs = this.compileShader(gl.VERTEX_SHADER, vSource);
                const fs = this.compileShader(gl.FRAGMENT_SHADER, fSource);
                if (!vs || !fs) return null;
                const program = gl.createProgram();
                gl.attachShader(program, vs);
                gl.attachShader(program, fs);
                gl.linkProgram(program);
                if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
                    console.error("Program Link Error:", gl.getProgramInfoLog(program));
                    return null;
                }
                return program;
            }
            compileShader(type, source) {
                const shader = gl.createShader(type);
                gl.shaderSource(shader, source);
                gl.compileShader(shader);
                if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
                    console.error("Shader Compile Error:", gl.getShaderInfoLog(shader));
                    gl.deleteShader(shader);
                    return null;
                }
                return shader;
            }
            getUniforms(program) {
                let uniforms = {};
                let count = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);
                for (let i = 0; i < count; i++) {
                    let name = gl.getActiveUniform(program, i).name;
                    uniforms[name] = gl.getUniformLocation(program, name);
                }
                return uniforms;
            }
            bind() {
                if(this.program) gl.useProgram(this.program);
            }
        }

        const blit = (() => {
            const vertexBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);
            gl.bindBuffer(gl.ARRAY_BUFFER, null);
            const elementBuffer = gl.createBuffer();
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementBuffer);
            gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);
            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);
            return (destination) => {
                gl.bindFramebuffer(gl.FRAMEBUFFER, destination ? destination.fbo : null);
                gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
                gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementBuffer);
                gl.enableVertexAttribArray(0);
                gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);
                gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);
            };
        })();

        function createTexture(width, height) {
            const texture = gl.createTexture();
            gl.bindTexture(gl.TEXTURE_2D, texture);
            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA16F, width, height, 0, gl.RGBA, gl.HALF_FLOAT, null);
            const filter = extLinear ? gl.LINEAR : gl.NEAREST;
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
            return texture;
        }

        function createFBO(width, height) {
            const texture = createTexture(width, height);
            const fbo = gl.createFramebuffer();
            gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);
            return { 
                fbo, texture, width, height, 
                attach: (id) => {
                    gl.activeTexture(gl.TEXTURE0 + id);
                    gl.bindTexture(gl.TEXTURE_2D, texture);
                } 
            };
        }

        function createDoubleFBO(width, height) {
            let fbo1 = createFBO(width, height);
            let fbo2 = createFBO(width, height);
            return {
                width, height, read: fbo1, write: fbo2,
                swap: function() { let temp = this.read; this.read = this.write; this.write = temp; }
            };
        }

        let velocity, density, divergence, pressure;
        let programs = {};
        let simWidth, simHeight;

        const getSource = (id) => document.getElementById(id).textContent;

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            simWidth = Math.floor(canvas.width >> CONFIG.TEXTURE_DOWNSAMPLE);
            simHeight = Math.floor(canvas.height >> CONFIG.TEXTURE_DOWNSAMPLE);
            velocity = createDoubleFBO(simWidth, simHeight);
            density = createDoubleFBO(simWidth, simHeight);
            divergence = createFBO(simWidth, simHeight);
            pressure = createDoubleFBO(simWidth, simHeight);
        }

        function init() {
            try {
                programs.advection = new Program(getSource('vertex-shader'), getSource('advection-shader'));
                programs.divergence = new Program(getSource('vertex-shader'), getSource('divergence-shader'));
                programs.jacobi = new Program(getSource('vertex-shader'), getSource('jacobi-shader'));
                programs.gradientSubtract = new Program(getSource('vertex-shader'), getSource('gradient-subtract-shader'));
                programs.splat = new Program(getSource('vertex-shader'), getSource('splat-shader'));
                programs.display = new Program(getSource('vertex-shader'), getSource('display-shader'));
                resize();
                requestAnimationFrame(update);
            } catch (e) {
                console.error("Initialization failed:", e);
            }
        }

        let lastTime = performance.now();
        function update(t) {
            const dt = Math.min((t - lastTime) / 1000, 0.016);
            lastTime = t;
            gl.viewport(0, 0, simWidth, simHeight);
            const time = t * 0.001;
            
            splat(0.5 + Math.sin(time) * 0.2, 0.5 + Math.cos(time * 0.8) * 0.2, Math.cos(time * 2.5) * CONFIG.SPLAT_FORCE, Math.sin(time * 2.5) * CONFIG.SPLAT_FORCE, [0.1, 0.2, 0.8], dt);
            splat(0.5 + Math.cos(time * 1.4) * 0.25, 0.5 + Math.sin(time * 1.2) * 0.25, Math.sin(time * 3.0) * CONFIG.SPLAT_FORCE * 0.8, Math.cos(time * 3.0) * CONFIG.SPLAT_FORCE * 0.8, [0.05, 0.4, 0.9], dt);

            programs.advection.bind();
            gl.uniform1f(programs.advection.uniforms.dt, dt);
            gl.uniform2f(programs.advection.uniforms.uTexelSize, 1.0 / simWidth, 1.0 / simHeight);
            gl.uniform1f(programs.advection.uniforms.uDissipation, CONFIG.VELOCITY_DISSIPATION);
            gl.uniform1i(programs.advection.uniforms.uVelocity, 0);
            gl.uniform1i(programs.advection.uniforms.uSource, 0);
            velocity.read.attach(0);
            blit(velocity.write);
            velocity.swap();

            gl.uniform1f(programs.advection.uniforms.uDissipation, CONFIG.DENSITY_DISSIPATION);
            gl.uniform1i(programs.advection.uniforms.uVelocity, 0);
            gl.uniform1i(programs.advection.uniforms.uSource, 1);
            velocity.read.attach(0);
            density.read.attach(1);
            blit(density.write);
            density.swap();

            programs.divergence.bind();
            gl.uniform2f(programs.divergence.uniforms.uTexelSize, 1.0 / simWidth, 1.0 / simHeight);
            gl.uniform1i(programs.divergence.uniforms.uVelocity, 0);
            velocity.read.attach(0);
            blit(divergence);

            programs.jacobi.bind();
            gl.uniform2f(programs.jacobi.uniforms.uTexelSize, 1.0 / simWidth, 1.0 / simHeight);
            gl.uniform1i(programs.jacobi.uniforms.uDivergence, 0);
            gl.uniform1i(programs.jacobi.uniforms.uPressure, 1);
            divergence.attach(0);
            for (let i = 0; i < CONFIG.PRESSURE_ITERATIONS; i++) {
                pressure.read.attach(1);
                blit(pressure.write);
                pressure.swap();
            }

            programs.gradientSubtract.bind();
            gl.uniform2f(programs.gradientSubtract.uniforms.uTexelSize, 1.0 / simWidth, 1.0 / simHeight);
            gl.uniform1i(programs.gradientSubtract.uniforms.uPressure, 0);
            gl.uniform1i(programs.gradientSubtract.uniforms.uVelocity, 1);
            pressure.read.attach(0);
            velocity.read.attach(1);
            blit(velocity.write);
            velocity.swap();

            gl.viewport(0, 0, canvas.width, canvas.height);
            programs.display.bind();
            gl.uniform1i(programs.display.uniforms.uTexture, 0);
            density.read.attach(0);
            blit(null);
            requestAnimationFrame(update);
        }

        function splat(x, y, dx, dy, color, dt) {
            programs.splat.bind();
            gl.uniform1i(programs.splat.uniforms.uTarget, 0);
            gl.uniform1f(programs.splat.uniforms.uAspectRatio, simWidth / simHeight);
            gl.uniform2f(programs.splat.uniforms.uPoint, x, y);
            gl.uniform3f(programs.splat.uniforms.uColor, dx * dt, dy * dt, 0.0);
            gl.uniform1f(programs.splat.uniforms.uRadius, CONFIG.SPLAT_RADIUS);
            velocity.read.attach(0);
            blit(velocity.write);
            velocity.swap();
            gl.uniform3f(programs.splat.uniforms.uColor, color[0], color[1], color[2]);
            gl.uniform1i(programs.splat.uniforms.uTarget, 0);
            density.read.attach(0);
            blit(density.write);
            density.swap();
        }

        window.addEventListener('resize', resize);
        window.onload = init;

        // Force scroll to top on load/refresh
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);

        // Piano Data
        const pianoTracks = [
            { title: "R. Schumann - Aufschwung", subtitle: "Northwell Health", url: "https://www.youtube.com/watch?v=mEEgSmhmkiA" },
            { title: "C. Debussy - Claire de Lune", subtitle: "", url: "https://youtu.be/chliWNkOIIs" },
            { title: "F. Chopin - Nocturne No. 2", subtitle: "E-Flat Major", url: "https://www.youtube.com/watch?v=mKvDlsbnnFM" },
            { title: "W. Mozart - Fantaisie D Minor", subtitle: "", url: "https://www.youtube.com/watch?v=8jmSxc9Xi1E&t=1s" },
            { title: "A. Dvorak - Violin Sonatina", subtitle: "Op 100, B. 183", url: "https://www.youtube.com/watch?v=D0DGwUpkVF4" }
        ];

        // Render Piano with Pagination
        const pianoGrid = document.getElementById('piano-grid');
        const pianoPrevBtn = document.getElementById('piano-prev-btn');
        const pianoNextBtn = document.getElementById('piano-next-btn');
        const pianoPageInfo = document.getElementById('piano-page-info');
        
        const pianoItemsPerPage = 2;
        let currentPianoPage = 1;

        function renderPiano() {
            if (!pianoGrid) return;
            
            pianoGrid.innerHTML = '';
            const totalPages = Math.ceil(pianoTracks.length / pianoItemsPerPage);
            const start = (currentPianoPage - 1) * pianoItemsPerPage;
            const end = start + pianoItemsPerPage;
            const pageTracks = pianoTracks.slice(start, end);
            
            pageTracks.forEach(track => {
                const item = document.createElement('a');
                item.href = track.url;
                item.target = "_blank";
                item.className = 'music-item';
                item.innerHTML = `
                    <div class="font-medium">${track.title}</div>
                    ${track.subtitle ? `<div class="text-sm opacity-60 mt-1">${track.subtitle}</div>` : ''}
                `;
                pianoGrid.appendChild(item);
            });

            // Update Controls
            pianoPageInfo.textContent = `${currentPianoPage} / ${totalPages}`;
            pianoPrevBtn.disabled = currentPianoPage === 1;
            pianoNextBtn.disabled = currentPianoPage === totalPages;
        }

        if (pianoPrevBtn && pianoNextBtn) {
            pianoPrevBtn.addEventListener('click', () => {
                if (currentPianoPage > 1) {
                    currentPianoPage--;
                    renderPiano();
                }
            });

            pianoNextBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(pianoTracks.length / pianoItemsPerPage);
                if (currentPianoPage < totalPages) {
                    currentPianoPage++;
                    renderPiano();
                }
            });
        }

        renderPiano();

        // Books Data
        const books = [
            { title: "The Fountainhead", author: "Ayn Rand", isRead: true },
            { title: "Atlas Shrugged", author: "Ayn Rand", isRead: true },
            { title: "For the New Intellectual", author: "Ayn Rand", isRead: false },
            { title: "The Lessons of History", author: "Will and Ariel Durant", isRead: true },
            { title: "Intelligent Machines", author: "Ray Kurzweil", isRead: false },
            { title: "Man and His Symbols", author: "Carl Jung", isRead: true },
            { title: "Benjamin Franklin", author: "Carl Van Doren", isRead: false },
            { title: "The Difference between God and Larry Ellison", author: "Mike Wilson", isRead: false },
            { title: "Napoleon", author: "Vincent Cronin", isRead: true },
            { title: "Metals and How To Weld Them", author: "T. B. Jefferson & Gorham Woods", isRead: false },
            { title: "Astro Boy, Vol. 1", author: "Osamu Tezuka", isRead: false },
            { title: "Focus: The ASML way", author: "Marc Hijink", isRead: false },
            { title: "Crime and Punishment", author: "Fyodor Dostoevsky", isRead: true },
            { title: "Cherry Orchard", author: "Anton Chekhov", isRead: true },
            { title: "Uncle Vanya", author: "Anton Chekhov", isRead: true },
            { title: "Journey to the Center of the Earth", author: "Jules Verne", isRead: true },
            { title: "Consider Phlebas", author: "Iain M. Banks", isRead: true },
            { title: "The Player of Games", author: "Iain M. Banks", isRead: true },
        ];

        // Render Books with Pagination
        const booksGrid = document.getElementById('books-grid');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const pageInfo = document.getElementById('page-info');
        
        const itemsPerPage = 3;
        let currentPage = 1;

        function renderBooks() {
            if (!booksGrid) return;
            
            booksGrid.innerHTML = '';
            const totalPages = Math.ceil(books.length / itemsPerPage);
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageBooks = books.slice(start, end);
            
            pageBooks.forEach(book => {
                const card = document.createElement('div');
                card.className = 'book-card';
                card.innerHTML = `
                    <div class="book-title">${book.title}</div>
                    <div class="book-author">${book.author}</div>
                    <div class="book-status ${book.isRead ? 'status-read' : 'status-toread'}">
                        ${book.isRead ? 'Read' : 'To Read'}
                    </div>
                `;
                booksGrid.appendChild(card);
            });

            // Update Controls
            pageInfo.textContent = `${currentPage} / ${totalPages}`;
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
        }

        // Shuffle books on load
        for (let i = books.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [books[i], books[j]] = [books[j], books[i]];
        }

        if (prevBtn && nextBtn) {
            prevBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderBooks();
                }
            });

            nextBtn.addEventListener('click', () => {
                const totalPages = Math.ceil(books.length / itemsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    renderBooks();
                }
            });
        }

        renderBooks();
    </script>
    
    <!-- Add the custom audio player script -->
    <script src="assets/js/audio-player.js"></script>

    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://yunguid.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
</body>
</html>
